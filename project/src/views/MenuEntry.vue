<template>
  <keep-alive>
    <component :is="activeComponent" :key="route.query.tab" />
  </keep-alive>
</template>

<script setup>
import { computed } from 'vue'
import { useRoute } from 'vue-router'

// å¼•å…¥ä½ çš„æ‰€æœ‰é¡µé¢ç»„ä»¶
import QueryPage from './menu/QueryPage.vue'
import MapPage from './menu/MapPage.vue'
import ResultPage from './menu/ResultPage.vue'
import AboutPage from "@/views/menu/AboutPage.vue";
import SourcePage from "@/views/menu/SourcePage.vue";
import PrivacyPage from "@/views/menu/PrivacyPage.vue";
import SettingPage from "@/views/menu/SettingPage.vue";
import ToolsPage from "@/views/menu/ToolsPage.vue";
import DataPage from "@/views/menu/DataPage.vue";
import WordsPage from "@/views/menu/WordsPage.vue";
import VillagesPage from "@/views/menu/VillagesPage.vue";
// ... å…¶ä»–ç»„ä»¶å¼•å…¥

const route = useRoute()

// è¿™é‡Œçš„é€»è¾‘å°±æ˜¯ä½ åŸæ¥å†™åœ¨ router.js é‡Œçš„
const activeComponent = computed(() => {
  const tab = route.query.tab
  // console.log('ğŸ” MenuEntry - å½“å‰tab:', tab)
  // console.log('ğŸ” MenuEntry - å®Œæ•´query:', route.query)

  const tabMap = {
    query: QueryPage,
    map: MapPage,
    result: ResultPage,
    source:SourcePage,
    privacy: PrivacyPage,
    setting:SettingPage,
    about: AboutPage,
    tools: ToolsPage,
    data: DataPage,
    words: WordsPage,
    villages: VillagesPage,
    // ... å…¶ä»–æ˜ å°„
  }

  const component = tabMap[tab] || QueryPage
  // console.log('ğŸ” MenuEntry - é€‰ä¸­çš„ç»„ä»¶:', component.name || component.__name || 'Unknown')

  return component
})
</script>